"use client";

import { getCookie } from "@/helpers/cookies";
import Command from "../command";
import Button from "../button";
import { verifyDeepDive } from "@/server-functions/verify/verify-deep-dive";
import { useProgress, useSavior } from "@/store/store";

const DeepDiveManual = () => {
  const call = getCookie("call");
  const { currentSavior, actualize } = useSavior();
  const { toggle } = useProgress();

  const isFinished = currentSavior?.progress.some((step) => step.step === "deep-dive" && step.finish !== null);

  const handleVerifyClick = async () => {
    const isSuccess = await verifyDeepDive();
    if (isSuccess) {
      actualize();
      toggle();
    } else {
      alert("–ü–æ—Ö–æ–∂–µ —á—Ç–æ —Ç—ã –µ—â–µ –Ω–µ –≤—ã–ø–æ–ª–Ω–∏–ª –ø–æ–ª–Ω—É—é –ø—Ä–æ–≤–µ—Ä–∫—É –ª–∏–Ω—Ç–∏–Ω–≥–∞ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ.");
    }
  };

  return (
    <>
      <h1>ü§ø –î–≤–∞–¥—Ü–∞—Ç—å —Ç—ã—Å—è—á –ª—å–µ –ø–æ–¥ –≤–æ–¥–æ–π</h1>
      <section>
        <p>–ù—É —á—Ç–æ –∂. –ù–∞—á–Ω—ë–º.</p>
        <p>–ó–∞—Ä–∞–Ω–µ–µ —Å–ø–∞—Å–∏–±–æ –∑–∞ –æ–∫–∞–∑–∞–Ω–Ω—É—é –ø–æ–º–æ—â—å!</p>
        <br />
        <br />
        <p>–û–±–æ–∑–Ω–∞—á–∏–º –ø–∞—Ä—É –ø—Ä–∞–≤–∏–ª:</p>
        <ul>
          <li>–í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∏–∑ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏;</li>
          <li>–í—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–¥–µ–ª–∞–Ω—ã –≤ –¥–æ–∫–µ—Ä –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ;</li>
          <li>–ù–µ–ª—å–∑—è –ª–æ–º–∞—Ç—å –∏ –≤—Ä–µ–¥–∏—Ç—å, –≤—Å–µ –∫—Ä–∞–π–Ω–µ —Ö—Ä—É–ø–∫–æ–µ;</li>
          <li>–ü–æ—Å–ª–µ —Ç–æ–≥–æ –∫–∞–∫ –≤—Å–µ –¥–µ–π—Å—Ç–≤–∏—è –≤ —à–∞–≥–µ –≤—ã–ø–æ–ª–Ω–µ–Ω—ã, –Ω—É–∂–Ω–æ –∑–∞–≤–µ—Ä—à–∏—Ç—å –µ–≥–æ;</li>
          <li>
            –î–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –µ—Å—Ç—å <b>vim</b>, –Ω—É –∏–ª–∏ –º–µ–Ω–µ–µ —Ö–∞—Ä–¥–∫–æ—Ä–Ω—ã–π <b>nano</b>.
          </li>
        </ul>
        <h2>–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Ä–∞–±–æ—á–µ–π —Å—Ä–µ–¥–µ</h2>
        <p>
          –î–ª—è –∑–∞–ø—É—Å–∫–∞ —É —Ç–µ–±—è –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω <b>docker</b>. –ù–∞—Å—Ç–æ—è—Ç–µ–ª—å–Ω–æ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º –ø–æ—Å—Ç–∞–≤–∏—Ç—å{" "}
          <a href="https://github.com/ryanoasis/nerd-fonts/releases/download/v3.2.1/Hack.zip">Nerd —à—Ä–∏—Ñ—Ç</a>, –∏–Ω–∞—á–µ
          –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –∏–∫–æ–Ω–∫–∏ –º–æ–≥—É—Ç –Ω–µ –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è.
        </p>
        <br />
        <p>–ó–∞–ø—É—Å–∫–∞–µ–º –Ω–∞—à–µ —Ä–∞–±–æ—á–µ–µ –º–µ—Å—Ç–æ –∫–æ–º–∞–Ω–¥–æ–π:</p>
        <Command text={`docker run -e CALL=${call} -ti dnwsilver/k8s-workstation:latest /bin/bash`} />
        <br />
        <h2>–ü–æ–ª—É—á–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π</h2>
        –ö–ª–æ–Ω–∏—Ä—É–µ–º —Å–µ–±–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –≤ –¥–æ–º–∞—à–Ω—é—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é <b>~/rebirthofhope</b>.
        <Command text={`git clone git@github.com:dnwSilver/rebirthofhope.git`} />
        <br />
        –ü–µ—Ä–µ—Ö–æ–¥–∏–º –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é c git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–µ–º.
        <Command text={`cd rebirthofhope`} />
        <br />
        –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ –Ω–∞—à—É –Ω–∞ –≤–µ—Ç–∫—É <b>download-secretsr/{call}</b>.
        <Command text={`git switch download-secretsr/${call}`} />
        <br />
        <h2>–í–∞–ª–∏–¥–∞—Ü–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π</h2>
        <p>
          –í—Å–µ –Ω—É–∂–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –ª–µ–∂–∞—Ç—å –≤ —Ña–π–ª–µ <b>~/rebirthofhope/Makefile</b>.
        </p>
        <p>
          –ù–∞—á–Ω–µ–º –ø—Ä–æ–≤–µ—Ä–∫—É —Å —Å–µ–∫—Ä–µ—Ç–æ–≤, –¥–ª—è —ç—Ç–æ–≥–æ –Ω–∞–ø–∏—Å–∞–Ω —Å–∫—Ä–∏–ø—Ç <b>verify-secrets</b>:
        </p>
        <Command text={`make verify-secrets`} />
        <br />
        <p>
          –ü—Ä–æ–≤–µ—Ä–∏–º –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å chart'–æ–≤, –¥–ª—è —ç—Ç–æ–≥–æ –Ω–∞–ø–∏—Å–∞–Ω —Å–∫—Ä–∏–ø—Ç <b>verify-charts</b>:
        </p>
        <Command text={`make verify-charts`} />
        <br />
        <p>
          –í—Å—ë –ª–∏ –≤ –ø–æ—Ä—è–¥–∫–µ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è, –¥–ª—è —ç—Ç–æ–≥–æ –Ω–∞–ø–∏—Å–∞–Ω —Å–∫—Ä–∏–ø—Ç <b>verify-environments</b>:
        </p>
        <Command text={`make verify-environments`} />
        <br />
        <p>
          –ù–∞–ø–æ—Å–ª–µ–¥–æ–∫ –∑–∞–ø—É—Å—Ç–∏–º –≤—Å–µ –≤–º–µ—Å—Ç–µ. –°–∫—Ä–∏–ø—Ç <b>verify</b> –Ω–∞–º –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –¥–∞–ª—å—à–µ, –¥–æ–≤–æ–ª—å–Ω–æ —Ç–∞–∫–∏ —á–∞—Å—Ç–æ. –ó–∞–ø—É—Å–∫–∞—Ç—å –µ—ë
          –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º <b>commit</b>'–æ–º –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π, –¥–ª—è —Ç–æ–≥–æ —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ –º—ã –≤—Å–µ –∑–∞–ø–æ–ª–Ω–∏–ª–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ.
        </p>
        <Command text={`make verify`} />
        <br />
        <br />
        {!isFinished && <Button onClick={handleVerifyClick}>–í—Å–µ —Å–¥–µ–ª–∞–Ω–æ!</Button>}
      </section>
    </>
  );
};

export default DeepDiveManual;
